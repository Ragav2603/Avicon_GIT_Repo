## 2025-05-15 - Trusting User Input in Notification Emails
**Vulnerability:** The `notify-proposal-submitted` edge function accepted `vendor_name` and `rfp_title` from the request body and used them directly in email notifications. This allowed authenticated users to send misleading emails with arbitrary content (e.g., spoofing a submission from a major company).
**Learning:** Even authenticated endpoints can be vulnerable if they trust user-supplied metadata instead of fetching the source of truth from the database. This is a common pattern when migrating frontend logic (where data is available) to backend/edge functions.
**Prevention:** Always derive critical notification content (names, titles, statuses) from the database using trusted identifiers (like IDs from JWT or verified ownership checks), rather than accepting them from the client request.
